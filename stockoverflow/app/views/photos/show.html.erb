
<div class='show_wrap'>
  <div id='main_photo_container'>
  <div id='title_container'><h2><%= @photo.title %></h2></div>
  <div id='main_image'><%= image_tag @photo.image.detail.url, :id => 'main_photo' %></div>
</div>

  <p id='question'>Q: <%= @photo.question %></p>
    
  <div id='votes'>
    <div id='plusminus'>
      <h3>Votes: <%= @photo.plusminus %></h3>
    </div>
    <% if current_user.voted_for?(@photo) %>
      <p>You liked this photo</p>
      <%= button_to('Remove my vote or dislike', remove_vote_photo_path(@photo), :method => :post) %>
    <% elsif current_user.voted_against?(@photo)%>
      <p>You disliked this photo</p>
      <%= button_to('Remove my vote or dislike', remove_vote_photo_path(@photo), :method => :post) %>
    <% else %>
      <%= link_to(image_tag("up24.png"), vote_up_photo_path(@photo), :alt => "Up Arrow", :id => "up_arrow", :method => :post) %><br>
      <%= link_to(image_tag("down32.png"), vote_down_photo_path(@photo), :alt => "Down Arrow", :id => "down_arrow", :method => :post) %><br>   
    <% end %>
  </div>

  <div id='description'>
    <h3>Description:</h3>
      <p><%= @photo.description %></p>
  </div>

  <div id='tags_box'>
    <h3>Tags:</h3>
      <%= raw @photo.tag_list.map { |t| link_to t, tag_path(t) }.join(', ') %>
  </div>

  <div id='album_show'>
    <h3>Album:</h3>
      <%= @photo.album_id %>
  </div>
  
  <div id= 'tweet'>
    <a href="https://twitter.com/share" class="twitter-share-button" data-via="stock_overflow_twitter_account" data-lang="en">Tweet</a>
   </div>
    <p>
    
  
  
    <% if can? :edit, @photo %>
      <h3><%= link_to 'Edit', edit_photo_path(@photo) %></h3>
    <% end %>
  
  
  
    <h3><%= link_to 'Back', photos_path %></h3>
  
  



  <h3>Answers: </h3>
  <% @answers.each do |answer| %>
    <div class='answer'>
      <ul>
        <li>A: <%= answer.content %></li>
        <li>User: <%= answer.user.email %></li>
        <% if can? :edit, answer %>
          <li><%= link_to 'Edit', edit_answer_path(answer) %></li>
        <% end %>
        <% if can? :destroy, answer %>       
          <li><%= link_to 'Delete Answer', answer, method: :delete, data: { confirm: 'Are you sure?' } %></li>     
        <% end %>
      </ul>
      <p>Score: <%= answer.plusminus %></span></p>
      </br>

      <% if current_user.voted_for?(answer) %>  
        <p>You voted for this answer</p>
        <%= button_to('Remove my vote or dislike', remove_vote_answer_path(answer), :method => :post) %><br>
      <% elsif current_user.voted_against?(answer) %>
        <p>You voted down this answer</p>
        <%= button_to('Remove my vote or dislike', remove_vote_answer_path(answer), :method => :post) %><br>
      <% else %> 
        <%= link_to(image_tag("up24.png"), vote_up_answer_path(answer), :alt => "Up Arrow", :id => "up_arrow", :method => :post) %><br>
        <%= link_to(image_tag("down32.png"), vote_down_answer_path(answer), :alt => "Down Arrow", :id => "down_arrow", :method => :post) %>
      <% end %>
    </div>  
  <% end %>

    <h3>Provide an answer:<h3>

  <% if current_user %>
  <%= form_for @answer do |f| %>
    <%= f.hidden_field :photo_id %>

    <%= f.hidden_field :user_id %> 

    <%= f.text_field :content %>
    <br>
    <%= f.submit "Submit" %>
  <% end %>
  <% end %>

</div>







<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
